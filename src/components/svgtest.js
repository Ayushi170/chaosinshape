import React, { useEffect, useRef } from "react";

const SquiggleScroll = () => {
  const svgRef = useRef(null);
  const pathRef = useRef(null);

  useEffect(() => {
    const scroll = () => {
      if (!svgRef.current || !pathRef.current) return;

      const distance = window.scrollY;
      const totalDistance = document.body.scrollHeight - window.innerHeight;
      const percentage = distance / totalDistance;
      const pathLength = pathRef.current.getTotalLength();

      pathRef.current.style.strokeDasharray = pathLength;
      pathRef.current.style.strokeDashoffset = pathLength * (1 - percentage);
    };

    scroll(); // Run once on mount
    window.addEventListener("scroll", scroll);
    
    return () => window.removeEventListener("scroll", scroll);
  }, []);

  return (
    <svg ref={svgRef} className="squiggle" width="100%" height="100%" viewBox="0 0 1920 8169">
      <path
        ref={pathRef}
        d="M1449.34-9.55a327.85,327.85,0,0,1,11.75,43.4,304.37,304.37,0,0,1,6.14,56.36c.21,25.08.56,66.82-23.51,106.53-3.52,5.81-30.17,49.81-55.15,45.45-14.28-2.49-18.92-19.22-29-17.31-9.23,1.75-10.19,16.72-21,42.84-10.08,24.26-22,53-44.3,58.49-9.13,2.25-21.68,2.37-28-5-6-7-10-15-14-23-12-31-16-63-31-93l-3-3c-1.72-4.25-5.49-11.58-13-14.87-10.3-4.53-21.2,1.38-33.68,8.38-17.09,9.59-41.42,23.25-43.4,44.94-1.31,14.35,8.22,20.66,3.68,28.76-6.44,11.49-27.19,1.68-41.47,13.11-16.67,13.34-19.66,51.72.51,74.56,10.36,11.72,27.34,19.93,43.36,18.12,14.2-1.6,31.51-11.49,42.43-20.68,4.35-3.66,12.72-11.44,25-12.51a38.08,38.08,0,0,1,7.56.19,57,57,0,0,1,28,11c1,2,3,3,5,5,10,11,6,27,9,41,4,14,13,25,26,33,7.08,6.07,22,20.71,24,42,1.77,18.6-7.5,32.08-26,59.05-17.25,25.11-27.3,39.75-43,41-15.08,1.16-20.65-11.27-35.14-7.25-14.13,3.91-22,19.35-24.57,24.39-3.51,6.87-6.67,13.08-5.4,20.52,1.86,10.9,11.2,12.45,22.11,26.34,4.78,6.08,14.63,18.62,14,32.41-.73,15.62-14.8,30-29.1,36.25-30.93,13.64-51.57-15.27-77.62-1-12.41,6.79-27.43,24.14-30.76,43.86-1.68,10,.21,17.2-5.07,21.16-8.35,6.25-20.84-6-34.43.34-5.73,2.66-12,8.79-13,16-1.93,14.58,19.88,19.23,26.07,39.66,4.18,13.82-1.47,26.06-12.77,50.56-8.58,18.59-17.13,37.12-32.46,39.82-8.49,1.5-13.19-2.9-19.84,1-7.38,4.3-8.47,13.73-11,25.22-5.09,22.8-9.88,26.53-14.28,42.76-11.2,41.4-3.17,102.65-2.68,168,.29,38.77-2.46,27.29-3,78-.85,80.15,6.06,105.76,4.66,186.49-.8,46.6-1.33,70.26-7.66,87.49-21.25,57.94-75.46,89.43-110,105-31,1-63-8-85-32-3-3-10-1-14,2-10,8-18,19-24,30-11,21-21,41-28,64-30,102-11,214,59,296,1,1,1,3,2,4,19,19,37,37,61,50l3,3c109,60,241,51,348-11,4-2,9-4,13-6,23-13,43-26,65-41,107-74,200-147,324-180,26-6,51-11,77-15,20-2,39-4,58-5,96.58-5.08,145.48-6.22,176,21,28.25,25.2,30.2,66,30.92,87.07,11.49,337.27-11.75,1249.53-11.75,1249.53-8.29,325.5,27.86,440.58-58.21,652.59-15.25,37.58-75.48,179.57-197.62,314-421.43,464-1277,506.89-1394,294.12-24.62-44.74-22.75-118.77,12.26-159.31,56.51-65.46,195.1-38.65,269.61-9.2,249.44,98.61,324.79,441.94,337,502.47,95.59,473-228,673.29-101.11,903.83,153.88,279.47,676.46,70.49,913,410.55,158.17,227.38,76.6,539.39,58.21,609.71-25.21,96.45-105.89,405-337,493.27-342.08,130.61-655.81-358.14-1033-212-124.25,48.15-219.71,151.38-263,261-100.87,255.28,95.9,507.51,104.17,517.79,156.23,194.1,394.66,215.66,652.6,239,279.21,25.24,682.9-6.23,713.87-137.87,7.18-30.52-5.8-65.86-27.57-82.72-58.92-45.63-216.32,17.72-284.94,128.68-85.48,138.2-3.69,302.51,3.06,315.57"
        stroke="red"
        strokeWidth="3"
        fill="none"
      />
    </svg>
  );
};

export default SquiggleScroll;
